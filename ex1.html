<html>
  <head>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {
        // Obtener par치metros de la URL
        const params = new URLSearchParams(window.location.search);
        const energyData = params.get('energy'); // Espera un string con formato "Nombre1,Valor1;Nombre2,Valor2"

        // Crear la data table
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Tablero Electrico');
        data.addColumn('number', 'Energia en kwh');

        // Procesar los datos y agregar las filas
        if (energyData) {
          const energyArray = energyData.split(';');
          energyArray.forEach(item => {
            const [name, value] = item.split(',');
            if (name && value) {
              data.addRow([name, Number(value)]);
            }
          });
        } else {
          // Valores por defecto si no hay par치metros
          data.addRows([
            ['TG1', 10000],
            ['TG2', 12500]
          ]);
        }

        // Opciones del gr치fico
        var options = {'title':'Energia en kwh', 'width':500, 'height':400};

        // Dibujar el gr치fico
        var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      }
    </script>
  </head>

  <body>
    <div id="chart_div"></div>
  </body>
</html>
